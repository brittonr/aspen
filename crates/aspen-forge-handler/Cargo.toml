[package]
name = "aspen-forge-handler"
version = "0.1.0"
edition = "2024"
description = "Forge (decentralized Git) RPC handler for Aspen distributed cluster"
license = "AGPL-3.0-or-later"

[dependencies]
# RPC core abstractions (RequestHandler trait, ClientProtocolContext)
aspen-rpc-core = { path = "../aspen-rpc-core", features = ["blob", "forge"] }

# Local crates
aspen-client-api = { workspace = true }
aspen-core = { path = "../aspen-core" }
aspen-blob = { path = "../aspen-blob" }
aspen-forge = { path = "../aspen-forge" }
aspen-cluster = { path = "../aspen-cluster", features = ["federation"] }

# Core dependencies
tokio = { version = "1.0", features = ["sync"] }
tracing = "0.1"
anyhow = "1.0"
async-trait = "0.1"
serde_json = "1.0"

# Iroh dependencies
iroh = { version = "0.95.1" }

# Hash and encoding dependencies
blake3 = { workspace = true }
hex = "0.4"
uuid = { version = "1.0", features = ["v4"] }

[features]
default = []
git-bridge = ["aspen-forge/git-bridge"]
global-discovery = ["aspen-rpc-core/global-discovery", "aspen-core/global-discovery"]

[dev-dependencies]
tokio = { version = "1.0", features = ["full", "test-util"] }
