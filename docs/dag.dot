digraph aspen {
  rankdir=BT;
  bgcolor="white";
  node [shape=box, fontsize=11, fontname="Helvetica", style="filled,rounded", penwidth=1.5];
  edge [color="#888888", arrowsize=0.7];
  newrank=true;

  subgraph cluster_legend {
    label="Layer"; fontsize=12; fontname="Helvetica Bold"; style=rounded; color="#cccccc";
    node [width=1.2, fontsize=9];
    l0 [label="Types", fillcolor="#ffffcc"];
    l1 [label="Infrastructure", fillcolor="#ccffcc"];
    l2 [label="Consensus", fillcolor="#ccccff"];
    l3 [label="Networking", fillcolor="#ffccff"];
    l4 [label="Handlers", fillcolor="#ffddcc"];
    l5 [label="Client", fillcolor="#ccffff"];
    l6 [label="Node/Test", fillcolor="#ff9999"];
    l0 -> l1 -> l2 -> l3 -> l4 -> l5 -> l6 [style=invis];
  }

  "aspen" [label="ASPEN", fillcolor="#ff9999"];
  "aspen-auth" [label="auth", fillcolor="#ffccff"];
  "aspen-client" [label="client", fillcolor="#ccffff"];
  "aspen-client-api" [label="client-api", fillcolor="#ccffff"];
  "aspen-cluster" [label="cluster", fillcolor="#ffccff"];
  "aspen-cluster-handler" [label="cluster-handler", fillcolor="#ffddcc"];
  "aspen-cluster-types" [label="cluster-types", fillcolor="#ffffcc"];
  "aspen-constants" [label="constants", fillcolor="#ffffcc"];
  "aspen-coordination" [label="coordination", fillcolor="#ffccff"];
  "aspen-coordination-protocol" [label="coordination-protocol", fillcolor="#ffffcc"];
  "aspen-core" [label="core", fillcolor="#ffddcc"];
  "aspen-core-essentials-handler" [label="core-essentials-handler", fillcolor="#ffddcc"];
  "aspen-dht-discovery" [label="dht-discovery", fillcolor="#ffccff"];
  "aspen-disk" [label="disk", fillcolor="#ccffcc"];
  "aspen-forge-protocol" [label="forge-protocol", fillcolor="#ffffcc"];
  "aspen-hlc" [label="hlc", fillcolor="#ffffcc"];
  "aspen-hooks-types" [label="hooks-types", fillcolor="#ffffcc"];
  "aspen-jobs-protocol" [label="jobs-protocol", fillcolor="#ffffcc"];
  "aspen-kv-types" [label="kv-types", fillcolor="#ffffcc"];
  "aspen-layer" [label="layer", fillcolor="#ccffcc"];
  "aspen-proxy" [label="proxy", fillcolor="#ffccff"];
  "aspen-raft" [label="raft", fillcolor="#ccccff"];
  "aspen-raft-network" [label="raft-network", fillcolor="#ccccff"];
  "aspen-raft-types" [label="raft-types", fillcolor="#ffffcc"];
  "aspen-redb-storage" [label="redb-storage", fillcolor="#ccccff"];
  "aspen-rpc-core" [label="rpc-core", fillcolor="#ffccff"];
  "aspen-rpc-handlers" [label="rpc-handlers", fillcolor="#ffddcc"];
  "aspen-sharding" [label="sharding", fillcolor="#ffccff"];
  "aspen-storage-types" [label="storage-types", fillcolor="#ffffcc"];
  "aspen-testing" [label="testing", fillcolor="#ff9999"];
  "aspen-testing-core" [label="testing-core", fillcolor="#ff9999"];
  "aspen-testing-fixtures" [label="testing-fixtures", fillcolor="#ff9999"];
  "aspen-testing-madsim" [label="testing-madsim", fillcolor="#ff9999"];
  "aspen-testing-network" [label="testing-network", fillcolor="#ff9999"];
  "aspen-ticket" [label="ticket", fillcolor="#ccffcc"];
  "aspen-time" [label="time", fillcolor="#ffffcc"];
  "aspen-traits" [label="traits", fillcolor="#ccffcc"];
  "aspen-transport" [label="transport", fillcolor="#ffccff"];

  { rank=same; "aspen-cluster-types" "aspen-constants" "aspen-coordination-protocol" "aspen-forge-protocol" "aspen-hlc" "aspen-hooks-types" "aspen-jobs-protocol" "aspen-kv-types" "aspen-raft-types" "aspen-storage-types" "aspen-time" }
  { rank=same; "aspen-disk" "aspen-layer" "aspen-ticket" "aspen-traits" }
  { rank=same; "aspen-raft" "aspen-raft-network" "aspen-redb-storage" }
  { rank=same; "aspen-auth" "aspen-cluster" "aspen-coordination" "aspen-dht-discovery" "aspen-proxy" "aspen-rpc-core" "aspen-sharding" "aspen-transport" }
  { rank=same; "aspen-cluster-handler" "aspen-core" "aspen-core-essentials-handler" "aspen-rpc-handlers" }
  { rank=same; "aspen-client" "aspen-client-api" }

  "aspen" -> "aspen-auth";
  "aspen" -> "aspen-client";
  "aspen" -> "aspen-client-api";
  "aspen" -> "aspen-cluster";
  "aspen" -> "aspen-coordination";
  "aspen" -> "aspen-core";
  "aspen" -> "aspen-hooks-types";
  "aspen" -> "aspen-proxy";
  "aspen" -> "aspen-raft";
  "aspen" -> "aspen-raft-types";
  "aspen" -> "aspen-rpc-handlers";
  "aspen" -> "aspen-sharding";
  "aspen" -> "aspen-testing";
  "aspen" -> "aspen-transport";
  "aspen-auth" -> "aspen-core";
  "aspen-client" -> "aspen-auth";
  "aspen-client" -> "aspen-client-api";
  "aspen-client" -> "aspen-core";
  "aspen-client" -> "aspen-ticket";
  "aspen-client" -> "aspen-transport";
  "aspen-client-api" -> "aspen-auth";
  "aspen-client-api" -> "aspen-coordination-protocol";
  "aspen-client-api" -> "aspen-forge-protocol";
  "aspen-client-api" -> "aspen-jobs-protocol";
  "aspen-cluster" -> "aspen-auth";
  "aspen-cluster" -> "aspen-coordination";
  "aspen-cluster" -> "aspen-core";
  "aspen-cluster" -> "aspen-dht-discovery";
  "aspen-cluster" -> "aspen-disk";
  "aspen-cluster" -> "aspen-hooks-types";
  "aspen-cluster" -> "aspen-proxy";
  "aspen-cluster" -> "aspen-raft";
  "aspen-cluster" -> "aspen-raft-types";
  "aspen-cluster" -> "aspen-sharding";
  "aspen-cluster" -> "aspen-testing";
  "aspen-cluster" -> "aspen-ticket";
  "aspen-cluster" -> "aspen-transport";
  "aspen-cluster-handler" -> "aspen-client";
  "aspen-cluster-handler" -> "aspen-client-api";
  "aspen-cluster-handler" -> "aspen-core";
  "aspen-cluster-handler" -> "aspen-rpc-core";
  "aspen-cluster-handler" -> "aspen-testing";
  "aspen-cluster-handler" -> "aspen-ticket";
  "aspen-coordination" -> "aspen-constants";
  "aspen-coordination" -> "aspen-core";
  "aspen-coordination" -> "aspen-kv-types";
  "aspen-coordination" -> "aspen-testing";
  "aspen-coordination" -> "aspen-time";
  "aspen-coordination" -> "aspen-traits";
  "aspen-core" -> "aspen-cluster-types";
  "aspen-core" -> "aspen-constants";
  "aspen-core" -> "aspen-disk";
  "aspen-core" -> "aspen-hlc";
  "aspen-core" -> "aspen-kv-types";
  "aspen-core" -> "aspen-layer";
  "aspen-core" -> "aspen-storage-types";
  "aspen-core" -> "aspen-time";
  "aspen-core" -> "aspen-traits";
  "aspen-core-essentials-handler" -> "aspen-client-api";
  "aspen-core-essentials-handler" -> "aspen-coordination";
  "aspen-core-essentials-handler" -> "aspen-core";
  "aspen-core-essentials-handler" -> "aspen-rpc-core";
  "aspen-core-essentials-handler" -> "aspen-testing";
  "aspen-hooks-types" -> "aspen-hlc";
  "aspen-kv-types" -> "aspen-constants";
  "aspen-proxy" -> "aspen-auth";
  "aspen-proxy" -> "aspen-core";
  "aspen-raft" -> "aspen-auth";
  "aspen-raft" -> "aspen-cluster-types";
  "aspen-raft" -> "aspen-constants";
  "aspen-raft" -> "aspen-coordination";
  "aspen-raft" -> "aspen-core";
  "aspen-raft" -> "aspen-hlc";
  "aspen-raft" -> "aspen-kv-types";
  "aspen-raft" -> "aspen-raft-network";
  "aspen-raft" -> "aspen-raft-types";
  "aspen-raft" -> "aspen-redb-storage";
  "aspen-raft" -> "aspen-sharding";
  "aspen-raft" -> "aspen-storage-types";
  "aspen-raft" -> "aspen-testing";
  "aspen-raft" -> "aspen-time";
  "aspen-raft" -> "aspen-traits";
  "aspen-raft" -> "aspen-transport";
  "aspen-raft-network" -> "aspen-core";
  "aspen-raft-network" -> "aspen-raft-types";
  "aspen-raft-network" -> "aspen-sharding";
  "aspen-raft-network" -> "aspen-time";
  "aspen-raft-network" -> "aspen-transport";
  "aspen-raft-types" -> "aspen-core";
  "aspen-redb-storage" -> "aspen-core";
  "aspen-rpc-core" -> "aspen-auth";
  "aspen-rpc-core" -> "aspen-client-api";
  "aspen-rpc-core" -> "aspen-cluster";
  "aspen-rpc-core" -> "aspen-constants";
  "aspen-rpc-core" -> "aspen-coordination";
  "aspen-rpc-core" -> "aspen-core";
  "aspen-rpc-core" -> "aspen-hooks-types";
  "aspen-rpc-core" -> "aspen-raft";
  "aspen-rpc-core" -> "aspen-sharding";
  "aspen-rpc-core" -> "aspen-testing";
  "aspen-rpc-handlers" -> "aspen-auth";
  "aspen-rpc-handlers" -> "aspen-client";
  "aspen-rpc-handlers" -> "aspen-client-api";
  "aspen-rpc-handlers" -> "aspen-cluster";
  "aspen-rpc-handlers" -> "aspen-cluster-handler";
  "aspen-rpc-handlers" -> "aspen-coordination";
  "aspen-rpc-handlers" -> "aspen-core";
  "aspen-rpc-handlers" -> "aspen-core-essentials-handler";
  "aspen-rpc-handlers" -> "aspen-hooks-types";
  "aspen-rpc-handlers" -> "aspen-raft";
  "aspen-rpc-handlers" -> "aspen-rpc-core";
  "aspen-rpc-handlers" -> "aspen-sharding";
  "aspen-rpc-handlers" -> "aspen-testing";
  "aspen-rpc-handlers" -> "aspen-ticket";
  "aspen-rpc-handlers" -> "aspen-transport";
  "aspen-sharding" -> "aspen-core";
  "aspen-sharding" -> "aspen-testing";
  "aspen-testing" -> "aspen-cluster";
  "aspen-testing" -> "aspen-cluster-types";
  "aspen-testing" -> "aspen-constants";
  "aspen-testing" -> "aspen-coordination";
  "aspen-testing" -> "aspen-core";
  "aspen-testing" -> "aspen-kv-types";
  "aspen-testing" -> "aspen-raft";
  "aspen-testing" -> "aspen-testing-core";
  "aspen-testing" -> "aspen-testing-fixtures";
  "aspen-testing" -> "aspen-testing-madsim";
  "aspen-testing" -> "aspen-testing-network";
  "aspen-testing" -> "aspen-traits";
  "aspen-testing-core" -> "aspen-cluster-types";
  "aspen-testing-core" -> "aspen-constants";
  "aspen-testing-core" -> "aspen-core";
  "aspen-testing-core" -> "aspen-kv-types";
  "aspen-testing-core" -> "aspen-traits";
  "aspen-testing-fixtures" -> "aspen-cluster-types";
  "aspen-testing-fixtures" -> "aspen-constants";
  "aspen-testing-fixtures" -> "aspen-kv-types";
  "aspen-testing-fixtures" -> "aspen-testing-core";
  "aspen-testing-fixtures" -> "aspen-traits";
  "aspen-testing-madsim" -> "aspen-cluster-types";
  "aspen-testing-madsim" -> "aspen-constants";
  "aspen-testing-madsim" -> "aspen-core";
  "aspen-testing-madsim" -> "aspen-kv-types";
  "aspen-testing-madsim" -> "aspen-raft";
  "aspen-testing-madsim" -> "aspen-testing-core";
  "aspen-testing-madsim" -> "aspen-traits";
  "aspen-traits" -> "aspen-cluster-types";
  "aspen-traits" -> "aspen-kv-types";
  "aspen-transport" -> "aspen-auth";
  "aspen-transport" -> "aspen-constants";
  "aspen-transport" -> "aspen-core";
  "aspen-transport" -> "aspen-raft-types";
  "aspen-transport" -> "aspen-sharding";
}
